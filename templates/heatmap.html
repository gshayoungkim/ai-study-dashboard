{% extends "base.html" %}
{% block title %}Heatmap{% endblock %}
{% block content %}
<div class="heatmap-container">
    <h2>주차별 완료 현황</h2>
    <table class="heatmap-table">
        <thead>
            <tr>
                <th>참여자</th>
                {% for i in range(1, current_progress + 1) %}
                <th>Ch{{ i }}</th>
                {% endfor %}
            </tr>
        </thead>
        <tbody>
            {% for user_id, data in submissions.items() %}
            <tr>
                <td class="user-cell">{{ data.name }}</td>
                {% for i in range(1, current_progress + 1) %}
                {% set ch_key = 'ch' + i|string %}
                <td class="heatmap-cell {% if data.submissions.get(ch_key, {}).get('completed', False) %}completed{% endif %}">
                    {% if data.submissions.get(ch_key, {}).get('completed', False) %}
                    <a href="{{ data.submissions.get(ch_key, {}).get('url', '#') }}" target="_blank">✓</a>
                    {% endif %}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}
